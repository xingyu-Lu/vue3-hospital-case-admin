var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r;import{K as o,u as n,r as p,j as c,h as d,t as u,R as g,i as b,E as h,S as y,a6 as m,T as f,U as k,Q as w,V as P,o as j,F as C,w as _,d as v,W as x,c as S,b as O,e as z}from"./vendor.0476fa1a.js";/* empty css                        *//* empty css                *//* empty css                      *//* empty css                 *//* empty css                  *//* empty css                     *//* empty css                    *//* empty css                        */import"./index.9aaa5adc.js";const E={name:"admin-list",setup(){o(!0);const e=n(),h=p({loading:!1,tableData:[],multipleSelection:[],total:0,currentPage:1,pageSize:10});c((()=>{y()}));const y=()=>{h.loading=!0,d.get("/api/back/cases",{params:{page:h.currentPage,page_size:h.pageSize}}).then((e=>{h.tableData=e.data,h.pageSize=e.pagination.perPage,h.total=e.pagination.total,h.currentPage=e.pagination.currentPage,h.loading=!1}))};return m=((e,a)=>{for(var t in a||(a={}))l.call(a,t)&&i(e,t,a[t]);if(r)for(var t of r(a))s.call(a,t)&&i(e,t,a[t]);return e})({},u(h)),a(m,t({changePage:e=>{h.currentPage=e,y()},handleAdd:()=>{e.push({path:"/case-add"})},handleEdit:a=>{e.push({path:"/case-add",query:{id:a}})},handlePreview:a=>{e.push({path:"/case-preview",query:{id:a}})},handleStatus:(e,a)=>{d.put("/api/back/cases/status",{id:e,status:a}).then((()=>{b.success("修改成功"),y()}))},Plus:g}));var m}},A=z("新增病例"),D={key:0},q={key:1},F={key:1},I={key:0,style:{color:"#67C23A"}},K={key:1,style:{color:"#E6A23C"}},Q=["onClick"],R=["onClick"],T=["onClick"],U=["onClick"];E.render=function(e,a,t,r,l,s){const i=h,o=y,n=m,p=f,c=k,d=w,u=P;return j(),C(d,{style:{"min-height":"100%"}},{header:_((()=>[v(i,{type:"primary",icon:r.Plus,onClick:r.handleAdd},{default:_((()=>[A])),_:1},8,["icon","onClick"])])),default:_((()=>[x(v(p,{data:e.tableData,stripe:"",style:{width:"100%"}},{default:_((()=>[v(o,{prop:"id",label:"id"}),v(o,{prop:"name",label:"姓名"}),v(o,{prop:"age",label:"年龄"}),v(o,{prop:"sex",label:"性别"},{default:_((e=>[0==e.row.sex?(j(),S("span",D,"男")):(j(),S("span",q,"女"))])),_:1}),v(o,{prop:"abstract",label:"病史摘要"}),v(o,{prop:"type_name",label:"病例类型"}),v(o,{prop:"part",label:"病例部位"}),v(o,{prop:"diagnosis",label:"临床诊断"}),v(o,{prop:"diagnosis_result",label:"诊断结果"}),v(o,{prop:"general_seen",label:"大体所见"}),v(o,{label:"图片"},{default:_((e=>[e.row.img_url?(j(),C(n,{key:e.row.id,src:e.row.img_url,lazy:!0,"initial-index":1},null,8,["src"])):(j(),S("span",F,"无"))])),_:1}),v(o,{prop:"status",label:"状态"},{default:_((e=>[1==e.row.status?(j(),S("span",I,"正常")):(j(),S("span",K,"弃用"))])),_:1}),v(o,{prop:"created_at",label:"创建时间"}),v(o,{label:"操作",width:"100"},{default:_((e=>[O("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:a=>r.handlePreview(e.row.id)},"预览",8,Q),O("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:a=>r.handleEdit(e.row.id)},"修改",8,R),1==e.row.status?(j(),S("a",{key:0,style:{cursor:"pointer","margin-right":"10px"},onClick:a=>r.handleStatus(e.row.id,0)},"弃用",8,T)):(j(),S("a",{key:1,style:{cursor:"pointer","margin-right":"10px"},onClick:a=>r.handleStatus(e.row.id,1)},"启用",8,U))])),_:1})])),_:1},8,["data"]),[[u,e.loading]]),v(c,{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.pageSize,"current-page":e.currentPage,onCurrentChange:r.changePage},null,8,["total","page-size","current-page","onCurrentChange"])])),_:1})};export{E as default};
